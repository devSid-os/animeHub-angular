{"version":3,"sources":["./src/app/anime-search/anime-search.component.ts","./src/app/anime-search/anime-search.component.html","./src/app/anime-search/anime-search.module.ts"],"names":[],"mappings":"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","file":"anime-search-anime-search-module.js","sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute, ParamMap, Router } from '@angular/router';\nimport { AnimeService } from '../Services/anime.service';\nimport { Subscription } from 'rxjs';\n\ninterface Pagination {\n  current_page: number,\n  last_page: number,\n  range: number,\n  buttonStart: number,\n  data: any,\n  limit: number\n}\n@Component({\n  selector: 'app-anime-search',\n  templateUrl: './anime-search.component.html',\n  styleUrls: ['./anime-search.component.css']\n})\nexport class AnimeSearchComponent implements OnInit, OnDestroy {\n  loading: boolean = false;\n  searchData: Array<any> = [];\n  searchValue: string = '';\n  sub$: Subscription | null = null;\n  filtersApplied = {\n    searchQuery: '',\n    sfw: true\n  }\n  customPagination: Pagination = {\n    limit: 24,\n    data: {},\n    current_page: 1,\n    buttonStart: 1,\n    last_page: 1,\n    range: 10\n  }\n\n  constructor(private _route: ActivatedRoute, private _animeService: AnimeService, private _router: Router) { }\n\n  ngOnInit(): void {\n    this.sub$ = this._route.queryParamMap.subscribe((param: ParamMap) => {\n      this.resetPagination();\n      this.filtersApplied.searchQuery = (param.get(\"query\") || '');\n      this.searchValue = this.filtersApplied.searchQuery;\n      this.searchAnime(this.filtersApplied.searchQuery, this.customPagination.current_page);\n    });\n  }\n\n  resetPagination(): void {\n    this.customPagination.limit = 24;\n    this.customPagination.current_page = 1;\n    this.customPagination.buttonStart = 1;\n    this.customPagination.last_page = 1;\n    this.customPagination.range = 10;\n    this.customPagination.data = {};\n  }\n\n  ngOnDestroy(): void {\n    if (this.sub$ instanceof Subscription) this.sub$.unsubscribe();\n  }\n\n  onSearchEnter(event: any) {\n    if (event.key === 'Enter') {\n      this.updateQueryParams(this.searchValue);\n    }\n  }\n\n  updateQueryParams(query: string): void {\n    if (this.searchValue.length > 0 && this.searchValue !== this.filtersApplied.searchQuery) {\n      this._router.navigate([], {\n        relativeTo: this._route,\n        queryParamsHandling: 'merge',\n        queryParams: { query }\n      });\n    }\n  }\n\n  searchAnime(q: string, page: number): void {\n    this.loading = true;\n    this._animeService.getAnimeSearch({ q, sfw: true, limit: 24, page })\n      .then((response: any) => {\n        // console.log(response);\n        this.searchData = response.data;\n        this.customPagination.last_page = response.pagination.last_visible_page;\n        this.customPagination.data[response.pagination.current_page] = response.data;\n        this.updatePagination(response.pagination.current_page);\n        this.loading = false;\n      })\n      .catch((error: any) => {\n        console.log(\"Error: \", error);\n        this.loading = false;\n      });\n  }\n\n  redirectToAnimePage(id: string): void {\n    this._router.navigate([`/anime/${id}`]);\n  }\n\n  updatePagination(pageNo: number): void {\n    pageNo = Number(pageNo);\n    this.customPagination.current_page = pageNo;\n    const current_page = Number(this.customPagination.current_page);\n    const firstBtn_on_ui = this.customPagination.buttonStart;\n    const lastBtn_on_ui = this.customPagination.buttonStart + (this.customPagination.range - 1);\n    if (current_page === 1 || current_page === this.customPagination.last_page) return;\n    if (current_page >= lastBtn_on_ui) {\n      this.customPagination.buttonStart += 1;\n    }\n    else if (current_page <= firstBtn_on_ui) {\n      this.customPagination.buttonStart -= 1;\n    }\n  }\n\n  onLastPageClick(): void {\n    this.customPagination.buttonStart = (this.customPagination.last_page - (this.customPagination.range - 1));\n    this.onPageChange(this.customPagination.last_page);\n  }\n\n  onFirstPageClick(): void {\n    this.customPagination.buttonStart = 1;\n    this.onPageChange(1);\n  }\n\n  onPageChange(pageNo: any): void {\n    pageNo = Number(pageNo);\n    console.log(pageNo)\n    if (pageNo in this.customPagination.data) {\n      this.searchData = this.customPagination.data[pageNo];\n      this.updatePagination(pageNo);\n    }\n    else {\n      this.searchAnime(this.filtersApplied.searchQuery, pageNo);\n    }\n  }\n\n  rangePaginationButtons(start: any, end: any) {\n    const startNum = Number(start);\n    const endNum = Number(end);\n    if (startNum > endNum) return []; // Return an empty array if start > end\n    return Array.from({ length: endNum - startNum + 1 }, (_, i) => startNum + i);\n  }\n}\n","<div class=\"searchInputDiv relative w-full flex justify-center my-4\">\n    <input [(ngModel)]=\"this.searchValue\" [value]=\"this.searchValue\" spellcheck=\"false\"\n        (keypress)=\"this.onSearchEnter($event);\" type=\"text\"\n        class=\"min-w-[300px] py-3 tracking-wider text-center focus:outline-none\" placeholder=\"Search Anime by Title\" />\n    <button (click)=\"this.updateQueryParams(this.searchValue)\" type=\"button\"\n        class=\"absolute right-4 top-[50%] lg:right-16\" style=\"transform: translateY(-50%);\">\n        <span class=\"material-icons-outlined text-[32px] text-[#4f4f4f] hover:text-[#bebebe]\">\n            search\n        </span>\n    </button>\n</div>\n\n<div class=\"custom-container\" style=\"margin-top: .8rem;\">\n\n    <div style=\"row-gap: 1.2rem!important; column-gap: 1rem!important;\"\n        class=\"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-8\">\n        <ng-container *ngIf=\"this.searchData.length;else noDataDiv;\">\n            <div (click)=\"this.redirectToAnimePage(anime.mal_id);\" *ngFor=\"let anime of this.searchData;\"\n                class=\"relative w-full\">\n                <app-anime-item [anime]=\"anime\"></app-anime-item>\n            </div>\n        </ng-container>\n\n        <ng-template #noDataDiv>\n            <p class=\"col-span-8 text-center tracking-wider text-[#bebebe] text-md md:text-lg\">\n                Sorry, No Results Found\n            </p>\n        </ng-template>\n    </div>\n\n    <!-- PAGINATION DIV -->\n    <div class=\"my-8 flex-wrap flex justify-center items-center gap-2\">\n\n        <button [disabled]=\"1 === this.customPagination.current_page\"\n            (click)=\"this.onPageChange(this.customPagination.current_page - 1);\" type=\"button\"\n            class=\"bg-[#3e3e3e] text-[12px] px-2 py-1 rounded-md border-1 border-[gray] tracking-wider hover:bg-[#ffd600] hover:text-black md:text-sm\">\n            PREV\n        </button>\n\n        <button (click)=\"this.onFirstPageClick();\" *ngIf=\"this.customPagination.buttonStart>=2\" type=\"button\"\n            class=\"bg-[#3e3e3e] text-[12px] px-2 py-1 rounded-md border-1 border-[gray] hover:bg-[#ffd600] hover:text-black md:text-sm\">\n            1\n        </button>\n\n        <button *ngIf=\"this.customPagination.buttonStart>=3\" type=\"button\"\n            class=\"text-[12px] px-2 py-1 rounded-md border-1 border-[gray] md:text-sm\">\n            ...\n        </button>\n\n        <button type=\"button\" [ngClass]=\"{'active-page-btn': this.customPagination.current_page===num}\"\n            *ngFor=\"let num of this.rangePaginationButtons(0, this.customPagination.last_page).slice(this.customPagination.buttonStart, this.customPagination.buttonStart+this.customPagination.range)\"\n            (click)=\"this.onPageChange(num)\"\n            class=\"bg-[#3e3e3e] text-[12px] px-2 py-1 rounded-md border-1 border-[gray] hover:bg-[#ffd600] hover:text-black md:text-sm\">\n            {{num}}\n        </button>\n\n        <button *ngIf=\"(this.customPagination.last_page - this.customPagination.buttonStart) > 10\" type=\"button\"\n            class=\"text-[12px] px-2 py-1 rounded-md border-1 border-[gray] md:text-sm\">\n            ...\n        </button>\n\n        <button (click)=\"this.onLastPageClick();\"\n            *ngIf=\"(this.customPagination.last_page - this.customPagination.buttonStart) >= 10\" type=\"button\"\n            class=\"bg-[#3e3e3e] text-[12px] px-2 py-1 rounded-md border-1 border-[gray] hover:bg-[#ffd600] hover:text-black md:text-sm\">\n            {{this.customPagination.last_page}}\n        </button>\n\n        <button [disabled]=\"this.customPagination.last_page === this.customPagination.current_page\"\n            (click)=\"this.onPageChange(this.customPagination.current_page + 1);\" type=\"button\"\n            class=\"bg-[#3e3e3e] text-[12px] px-2 py-1 text-sm rounded-md border-1 border-[gray] tracking-wider hover:bg-[#ffd600] hover:text-black md:text-sm\">\n            NEXT\n        </button>\n    </div>\n\n</div>\n\n\n\n<app-loader *ngIf=\"this.loading\"></app-loader>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { AnimeSearchComponent } from './anime-search.component';\nimport { RouterModule, Routes } from '@angular/router';\nimport { LoaderModule } from '../loader/loader.module';\nimport { SharedModule } from '../shared/shared.module';\nimport { FormsModule } from '@angular/forms';\n\nconst routes: Routes = [\n  { path: '', component: AnimeSearchComponent }\n]\n\n@NgModule({\n  declarations: [AnimeSearchComponent],\n  imports: [\n    CommonModule,\n    RouterModule.forChild(routes),\n    LoaderModule,\n    SharedModule,\n    FormsModule\n  ]\n})\nexport class AnimeSearchModule { }\n"],"sourceRoot":"webpack:///"}